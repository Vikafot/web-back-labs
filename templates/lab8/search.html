{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 8{% endblock %}

{% block main %}
    <h1>–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π</h1>

    <form method="get" style="margin-bottom: 20px;">
        <input type="text" name="q" value="{{ query }}" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ—Ä–∞–∑—É –¥–ª—è –ø–æ–∏—Å–∫–∞..." required
               style="padding: 5px; width: 300px;">
        <button type="submit">–ù–∞–π—Ç–∏</button>
    </form>

    {% if query %}
        <p>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É: <strong>"{{ query }}"</strong></p>

        {% if not results %}
            <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
        {% else %}
            {% for article, author_login in results %}
            <div class="article-item" style="border: 1px solid #ddd; padding: 10px; margin-bottom: 10px;">
                <h3>{{ article.title }}</h3>
                <p><strong>–ê–≤—Ç–æ—Ä:</strong> {{ author_login }}</p>
                <blockquote>{{ article.article_text[:150] }}{% if article.article_text|length > 150 %}...{% endif %}</blockquote>
                {% if not article.is_public %}
                    <span style="color: #777; font-size: 0.9em;">üîí –°–∫—Ä—ã—Ç–∞—è —Å—Ç–∞—Ç—å—è</span>
                {% endif %}
            </div>
            {% endfor %}
        {% endif %}
    {% endif %}
{% endblock %}
